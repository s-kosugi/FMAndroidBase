/*==============================================================================*/
/*																				*/
/*	@file title	:	cStageGoal.cpp												*/
/*  @brief		:	ゴールオブジェクトクラス									*/
/*	@written	:	s.kosugi													*/
/*	@create		:   2020/08/19													*/
/*																				*/
/*==============================================================================*/

#include "cStageGoal.h"
#include "..\..\Player\cPlayer.h"

//==========================================================================================
// 定数
//==========================================================================================
const int	cStageGoal::PRIORITY = 300;

//==========================================================================================
// コンストラクタ
//==========================================================================================
cStageGoal::cStageGoal(IBaseObject * parent)
	: IStage(parent, "StageGoal", "data\\graphic\\box.png")
{
}

//==========================================================================================
// デストラクタ
//==========================================================================================
cStageGoal::~cStageGoal(void)
{
}

//==========================================================================================
// 初期化
//==========================================================================================
void cStageGoal::Initialize(const cVector2 & pos)
{
	SetPriority(PRIORITY);
	// 当たり判定を設定
	m_fDist = GetSpriteSize().x / 2.0f;

	IStage::Initialize(pos);
}

//==========================================================================================
// 更新
//==========================================================================================
void cStageGoal::Update(void)
{
	IStage::Update();
}

//==========================================================================================
// プレイヤー衝突時の処理
//==========================================================================================
void cStageGoal::HitPlayer(void)
{
	cPlayer* player = (cPlayer*)GetParent()->FindSibling("Player");
	if (player)
	{
		// プレイヤーをゴール状態にする
		player->ChangeState(cPlayer::STATE::GOAL);
	}
}
